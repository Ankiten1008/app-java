// Groovy Scripyt
node{
  def mvnHome = tool name: 'maven-tool', type: 'maven'
  stage('GIT Checkout'){
    checkout([$class: 'GitSCM',
                branches: [[name: '*/master' ]],
                extensions: scm.extensions,
                userRemoteConfigs: [[
                    url: 'https://github.com/Ankiten1008/app-java.git',
                    credentialsId: 'gitCredentials'
                ]]
            ])
    }
    
    stage('Build with Maven'){
      sh "${mvnHome}/bin/mvn package"
      }
      
    stage('SonarQube Code Analysis'){
      withSonarQubeEnv('sonar_serv'){
      sh "${mvnHome}/bin/mvn sonar:sonar"
      }
     }
      
    
    stage('Deploy to Tomcat Server'){
         sh 'chmod 777 target/*.war'
         sh 'cp target/*.war /opt/apache-tomcat-8.5.51/webapps/'
      }
 }
 
 
  
